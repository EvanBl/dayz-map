<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DayZ World Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="">
  <style>
    html, body, #map { height: 100%; margin: 0; padding: 0; }
    .leaflet-container { background: #0b0f14; }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  <script>
    // ---- CONFIG ----
    const BASE  = "https://EvanBl.github.io/dayz-map/"; // your Pages base (trailing slash)
    const WORLD = "world";
    const VIEW  = "flat";
    const EXT   = "jpg";
    const TILE  = 128;  // Dynmap default

    // Pick any real tile from your repo to center (adjust if you like)
    // Example visible in your screenshots: -10_-33.jpg is under folder -1_-3/
    const startX = -10;
    const startY = -33;

    // Truncate toward zero (matches your folder names: -33/10 -> -3, 17/10 -> 1)
    function trunc10(n) { return n < 0 ? Math.ceil(n / 10) : Math.floor(n / 10); }

    // Custom tile layer that inserts the group folder: "<gx>_<gy>/<x>_<y>.jpg"
    const LayerWithGroups = L.TileLayer.extend({
      getTileUrl: function(coords) {
        const x = coords.x, y = coords.y;
        const gx = trunc10(x), gy = trunc10(y);
        return `${BASE}tiles/${WORLD}/${VIEW}/${gx}_${gy}/${x}_${y}.${EXT}`;
      }
    });

    const map = L.map('map', { crs: L.CRS.Simple, minZoom: 0, maxZoom: 0, zoomControl: true });

    new LayerWithGroups('', { tileSize: TILE, noWrap: true }).addTo(map);

    // Center on a real tile so you don't start in blank space
    map.setView([startY * TILE, startX * TILE], 0);
  </script>
</body>
</html>
